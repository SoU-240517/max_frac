# 要件定義書

## 概要
Windowsデスクトップ向けのフラクタルエディタアプリケーション。数学的に正確なフラクタル生成機能と、美しい画像出力機能を提供する。ユーザーは様々なフラクタルパターンを作成、編集、カスタマイズし、高品質な画像として出力できる。

## 機能要件

### 要件 1: フラクタル生成機能
- ユーザーストーリー: 数学愛好家として、数学的に正確なフラクタルを生成したいので、様々なフラクタルアルゴリズムを選択して実行できるようにしたい
- 補足:
  - 初期実装ではマンデルブロ集合とジュリア集合をプラグインとして実装する
  - 他のアルゴリズムのプラグインは初期実装後に追加する予定
  - アルゴリズムの追加や切り替えが容易であること
  - 数学的に正確な計算を行うこと

### 要件 2: パラメータ調整機能
- ユーザーストーリー: フラクタルアーティストとして、フラクタルの外観をカスタマイズしたいので、数学的パラメータを直感的に調整できるようにしたい
- 補足:
  - 調整可能なパラメータ例：反復回数、ズーム倍率、中心座標、複素数パラメータ（c, z など）、色彩パレット、スムージング係数など
  - 数値入力欄で値を直接入力でき、さらに値をマウススクロールで変更可能であること
  - 調整結果がリアルタイムでプレビューに反映されること
  - パラメータのプリセット保存・読込機能

### 要件 3: 色彩・視覚効果機能
- ユーザーストーリー: デジタルアーティストとして、美しいフラクタル画像を作成したいので、豊富な色彩オプションと視覚効果を適用できるようにしたい
- 補足:
  - グラデーション、カラーパレット、カスタム配色の選択が可能
  - 複数のグラデーションをまとめた「グラデーションパック」をサポートする
  - グラデーションを作成・編集するためのエディタを実装する
  - 輪郭強調、アンチエイリアス、スムージング、ぼかし等の視覚効果を適用できる
  - 色彩や効果のプリセット保存・読込機能
  - 背景色にグラデーションを適用可能
  - RGBA形式をサポートする

### 要件 4: 画像出力機能
- ユーザーストーリー: フラクタルアーティストとして、作品を共有・印刷したいので、高品質な画像ファイルとして出力できるようにしたい
- 補足:
  - PNG、JPEG、BMPなどの一般的な画像フォーマットで保存可能
  - 解像度やアスペクト比を指定して出力できる
  - 透過背景やカラープロファイルの指定も可能

### 要件 5: ユーザーインターフェース
- ユーザーストーリー: 一般ユーザーとして、複雑な数学的概念を理解しなくても美しいフラクタルを作成したいので、直感的で使いやすいインターフェースを使用したい
- 補足:
  - ドラッグ＆ドロップや右クリックメニューなど、直感的な操作体系
  - ドラッグで表示範囲の移動
  - スクロールでズームイン/アウト
  - パラメータが変化した場合は、即座にプレビューを更新する
  - ツールチップやヘルプガイドの充実
  - ダークモードやカスタムテーマ対応

### 要件 6: プラグインシステム
- ユーザーストーリー: 数学研究者・開発者として、独自のフラクタルアルゴリズムを実装・共有したいので、カスタムフラクタルタイプをプラグインとして追加できるようにしたい
- 補足:
  - プラグインの追加・削除・有効化がアプリ上で簡単に行える
  - プラグインAPIやサンプルコードの提供
  - プラグインの配布・共有機能

### 要件 7: パフォーマンス最適化
- ユーザーストーリー: パワーユーザーとして、複雑で高解像度のフラクタルを効率的に生成したいので、最適化されたパフォーマンスを体験したい
- 補足:
  - マルチスレッドやGPUアクセラレーションの活用
  - 大きな画像や高反復数でも快適に動作する
  - 計算進捗の表示やキャンセル機能

### 要件 8: 独自数式入力機能
- ユーザーストーリー: 数学愛好家や開発者として、標準のフラクタル式だけでなく、自分で定義した数式（例：z² + c の代わりに c / (2z³ − 2) + 1 など）を使ってフラクタルを描画したいので、独自の複素数式を入力・編集できるようにしたい
- 補足:
  - 数式入力欄でz, cなどの変数や四則演算、累乗、標準的な関数（sin, cos, expなど）をサポート
  - 数式の構文エラーや未定義動作はユーザーに分かりやすく通知
  - 入力された式をパースし、フラクタル生成アルゴリズムに反映
